---
aliases: 
tags:
  - corsi/informatica/programmazione_strutture_dati
paragrafo: Codice
cssclasses:
  - 
---
La `allocArrDyn` alloca dinamicamente un array di interi estratto da una stringa. Restituisce un puntatore all'array.

1. La funzione prenderà in input: `*size`, `*str`.
	- [[003 Fasi dello Sviluppo del Programma#^bda15e|Precondizione]]:  Dimensione stringa $> 0$..
2. La funzione darà in output: `a`.
	- [[003 Fasi dello Sviluppo del Programma#^23536b|Postcondizione]]: Si crea un array `a` riempito di elementi definiti dalla stringa.

[[003 Fasi dello Sviluppo del Programma#DIZIONARIO DEI DATI|Dizionario dei dati]]:

| Ident. | Tipo    | Desc.                                                             |
| ------ | ------- | ----------------------------------------------------------------- |
| size   | int     | Dimensione del nuovo array, passato con un puntatore al chiamante |
| str    | stringa | Stringa da dove prelevare gli interi                              |
| p      | array   | Puntatore al nuovo array                                          |


```C
//Restituisce un puntatore ad un vettore (allocato dinamicamente) di interi estratti da un buffer.

int *allocaArrDyn(char *str, int *size){
	int *p; //Puntatore al primo elemento dell'array
	int i = 0; //Variabile per ciclare nell'array
	int n = 0; //Numero di caratteri letti dalla sscanf

	int *arr = (int *) malloc(sizeof(int)); //Array
	//Si crea un array di dimensione 1

	while (sscanf(str, "%d%n", &arr[i], &n) == 1){
		str += n; //Avanza il puntatore str di n posti
		i++;
		p = realloc(arr, (i+1)*sizeof(int));
	}

	*size = i; //Dimensione dell'array
	return p;
}
```

Tipica chiamata alla funzione: `allocaArrDyn(str, &size)`.

[[000 Indice PSD|↖ Ritorna all'indice ↖]]